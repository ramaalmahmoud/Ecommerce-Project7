<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password</title>
    <link rel="icon" type="image/x-icon" href="img/logo/favicon.png">
        <!-- bootstrap css -->
        <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
        <!-- magnific-popup css -->
        <link rel="stylesheet" type="text/css" href="css/magnific-popup.css">
        <!-- animate css -->
        <link rel="stylesheet" type="text/css" href="css/animate.min.css">
        <!-- font-awesome css -->
        <link rel="stylesheet" type="text/css" href="css/all.min.css">
        <!--fether css -->
        <link rel="stylesheet" type="text/css" href="css/feather.css">
        <!-- owl css -->
        <link rel="stylesheet" type="text/css" href="css/owl.carousel.min.css">
        <link rel="stylesheet" type="text/css" href="css/owl.theme.default.min.css">
        <!-- swiper-bundle css -->
        <link rel="stylesheet" type="text/css" href="css/swiper-bundle.min.css">
        <!-- slick slider css -->
        <link rel="stylesheet" type="text/css" href="css/slick.css">
        <!-- style css -->
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <!-- account css -->
</head>

<style>

    /* Center the form */
.acc-page {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh; /* Ensure it takes the full viewport height */
    background-color: #f5f5f5; /* Add a background color */
}

/* Style the form container */
.login {
    background-color: #fff; /* White background for the form */
    padding: 40px; /* Add padding */
    border-radius: 10px; /* Rounded corners */
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Soft shadow */
    max-width: 400px; /* Limit the width */
    width: 100%;
}

/* Style the form header */
.login-form-container h2 {
    text-align: center;
    margin-bottom: 20px;
    font-size: 24px;
    color: #333;
    font-family: 'Arial', sans-serif;
}

/* Style the input fields */
.input-full {
    width: calc(100% - 20px); /* Full width with some padding inside */
    padding: 10px;
    margin-top: 8px;
    margin-bottom: 15px;
    border: 1px solid #ccc; /* Border around input fields */
    border-radius: 5px; /* Rounded input fields */
    box-sizing: border-box;
    font-size: 14px;
}

/* Label styles */
label {
    font-weight: bold;
    color: #555;
    font-size: 14px;
}

/* Style the form action buttons */

</style>
<body>
    <div class="acc-page">
        <div class="login">
            <form method="post" id="form">
                <div class="login-form-container">
                    <h2>Reset Password</h2>
                    <ul class="fill-form">
                       
                        <li class="log-email">
                            <label>Reset Token</label>
                            <input class="input-full" type="text" name="Token" id="token" placeholder="Enter your reset token">
                        </li>
                        <li class="log-pwd">
                            <label>New Password</label>
                            <input class="input-full" type="password" name="NewPassword" id="newPassword" placeholder="Enter new password">
                        </li>
                    </ul>
                    <div class="form-action-button">
                        <button type="submit" class="btn btn-style2" onclick="resetPassword(event)">Reset Password</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    
    
    <script>
    function resetPassword(event) {
  debugger
    
    var token = document.getElementById('token').value;
    var newPassword = document.getElementById('newPassword').value;

    var data = {
        token: token,
        newPassword: newPassword
    };
event.preventDefault();
    fetch('https://localhost:44325/api/Auth/reset-password', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
    })
    .then(response => response.json()
      
    )
    .then(data => {
        console.log('Password reset successful:', data);  // Check if reset is successful
       
    })
    .catch(error => console.error('Error:', error));
    window.location.href ="login-account.html";  // Redirect to login page
}


async function getAllCategories() {
            var CatURL = "https://localhost:44325/api/Categories/GetAllCategories";
            var response = await fetch(CatURL);
            var data = await response.json();
            let CategoriesList = document.getElementById("CategoriesList");
            console.log(data);
            data.forEach(element => {
                CategoriesList.innerHTML += `
                                <li class="singlemenu-li">
                                <a href="#" class="singlelink-title">
                                <span class="sp-link-title">${element.categoryName}</span>
                                </a>
                                </li>`
        })
        };
        getAllCategories();

    </script>
     <script src="js/jquery-3.6.3.min.js"></script>
     <!-- bootstrap js -->
     <script src="js/bootstrap.min.js"></script>
     <script src="js/popper.min.js"></script>
     <!-- magnific-popup js -->
     <script src="js/jquery.magnific-popup.min.js"></script>
     <!-- owl js -->
     <script src="js/owl.carousel.min.js"></script>
     <!-- swiper-bundle js -->
     <script src="js/swiper-bundle.min.js"></script>
     <!-- slick js -->
     <script src="js/slick.min.js"></script>
     <!-- waypoints js -->
     <script src="js/waypoints.min.js"></script>
     <!-- counter js -->
     <script src="js/counter.js"></script>
     <!-- main js -->
     <script src="js/main.js"></script>
     <script src="minicart.js"></script>

</body>
</html>